SDEC658B ;ALB/SAT/JSM - VISTA SCHEDULING PRE/POST (CONTINUED) ;MAR 15, 2017
 ;;5.3;Scheduling;**658**;Aug 13, 1993;Build 23
 ;
 Q
 ;
APPT  ;
 D AGS
 D AGSC
 D AGSP
 D AGSA
 D AGSB
 D AGC
 D AGCC
 Q
AGS  ;GS IN 409.85
 N Y
 S Y=$$NOW^XLFDT,Y=$$FMTE^XLFDT(Y)
 W !!,"Building new GS xref in 409.85..."
 W !,Y
 N SDXR,SDRES,SDOUT
 S SDXR("FILE")=409.85
 S SDXR("NAME")="GS"
 S SDXR("TYPE")="R"
 S SDXR("USE")="LS"
 S SDXR("EXECUTION")="R"
 S SDXR("ACTIVITY")="IR"
 S SDXR("SHORT DESCR")="SORT BY REQ SERVICE/SPECIALTY ID AND ORIGINATING DATE"
 S SDXR("DESCR",1)="This xref is used to sort Appointment Request entries by the REQ "
 S SDXR("DESCR",2)="SERVICE/SPECIALTY field (#8.5) and the CREATE DATE field (#1)."
 S SDXR("VAL",1)=8.5
 S SDXR("VAL",1,"SUBSCRIPT")=1
 S SDXR("VAL",1,"COLLATION")="F"
 S SDXR("VAL",2)=1
 S SDXR("VAL",2,"SUBSCRIPT")=2
 S SDXR("VAL",2,"COLLATION")="F"
 D CREIXN^DDMOD(.SDXR,"S",.SDRES,"SDOUT")
 Q
AGSC  ;GSC IN 409.85
 N Y
 S Y=$$NOW^XLFDT,Y=$$FMTE^XLFDT(Y)
 W !!,"Building new GSC xref in 409.85..."
 W !,Y
 N SDXR,SDRES,SDOUT
 S SDXR("FILE")=409.85
 S SDXR("NAME")="GSC"
 S SDXR("TYPE")="R"
 S SDXR("USE")="LS"
 S SDXR("EXECUTION")="R"
 S SDXR("ACTIVITY")="IR"
 S SDXR("SHORT DESCR")="SORT BY REQ SERVICE/SPECIALTY ID AND CID/PREFERRED DATE OF APPT"
 S SDXR("DESCR",1)="This xref is used to sort Appointment Request entries by the REQ "
 S SDXR("DESCR",2)="SERVICE/SPECIALTY field (#8.5) and the CID/PREFERRED DATE OF APPT field "
 S SDXR("DESCR",3)="(#22)."
 S SDXR("VAL",1)=8.5
 S SDXR("VAL",1,"SUBSCRIPT")=1
 S SDXR("VAL",1,"COLLATION")="F"
 S SDXR("VAL",2)=22
 S SDXR("VAL",2,"SUBSCRIPT")=2
 S SDXR("VAL",2,"COLLATION")="F"
 D CREIXN^DDMOD(.SDXR,"S",.SDRES,"SDOUT")
 Q
AGSP  ;GSP IN 409.85
 N Y
 S Y=$$NOW^XLFDT,Y=$$FMTE^XLFDT(Y)
 W !!,"Building new GSP xref in 409.85..."
 W !,Y
 N SDXR,SDRES,SDOUT
 S SDXR("FILE")=409.85
 S SDXR("NAME")="GSP"
 S SDXR("TYPE")="R"
 S SDXR("USE")="LS"
 S SDXR("EXECUTION")="R"
 S SDXR("ACTIVITY")="IR"
 S SDXR("SHORT DESCR")="SORT BY REQ SERVICE/SPECIALTY, ENROLLMENT PRIORITY, AND CREATE DATE"
 S SDXR("DESCR",1)="This xref is used to sort Appointment Request entries by the REQ "
 S SDXR("DESCR",2)="SERVICE/SPECIALTY field (#8.5), Patient's ENROLLMENT PRIORITY, and the "
 S SDXR("DESCR",3)="CREATE DATE field (#1)."
 S SDXR("DESCR",4)="The Patient's ENROLLMENT PRIORITY comes from the ENROLLMENT PRIORITY "
 S SDXR("DESCR",5)="field (#.07) of the PATIENT ENROLLMENT file (#27.11)."
 S SDXR("DESCR",6)="The CURRENT ENROLLMENT field (#27.01) of the PATIENT file (#2) contains "
 S SDXR("DESCR",7)="the pointer into the PATIENT ENROLLMENT FILE."
 S SDXR("VAL",1)=8.5
 S SDXR("VAL",1,"SUBSCRIPT")=1
 S SDXR("VAL",1,"COLLATION")="F"
 S SDXR("VAL",2)="N DFN,PCE S DFN=$P($G(^SDEC(409.85,DA,0)),U,1),PCE=$P($G(^DPT(+DFN,""ENR"")),U,1),X=+$P($G(^DGEN(27.11,+PCE,0)),U,7)"
 S SDXR("VAL",2,"SUBSCRIPT")=2
 S SDXR("VAL",3)=1
 S SDXR("VAL",3,"SUBSCRIPT")=3
 S SDXR("VAL",3,"COLLATION")="F"
 D CREIXN^DDMOD(.SDXR,"S",.SDRES,"SDOUT")
 Q
AGSA  ;GSA IN 409.85
 N Y
 S Y=$$NOW^XLFDT,Y=$$FMTE^XLFDT(Y)
 W !!,"Building new GSA xref in 409.85..."
 W !,Y
 N SDXR,SDRES,SDOUT
 S SDXR("FILE")=409.85
 S SDXR("NAME")="GSA"
 S SDXR("TYPE")="R"
 S SDXR("USE")="LS"
 S SDXR("EXECUTION")="R"
 S SDXR("ACTIVITY")="IR"
 S SDXR("SHORT DESCR")="SORT BY REQ SERVICE/SPECIALTY, SVC CONNECTED, AND CREATE DATE"
 S SDXR("DESCR",1)="This xref is used to sort Appointment Request entries by the REQ "
 S SDXR("DESCR",2)="SERVICE/SPECIALTY field (#8.5), SERVICE CONNECTED, and the CREATE DATE "
 S SDXR("DESCR",3)="field (#1)."
 S SDXR("DESCR",4)="SERVICE CONNECTED is the SERVICE CONNECTED? field (#.301) in the PATIENT "
 S SDXR("DESCR",5)="file (#2)."
 S SDXR("VAL",1)=8.5
 S SDXR("VAL",1,"SUBSCRIPT")=1
 S SDXR("VAL",1,"COLLATION")="F"
 S SDXR("VAL",2)="N DFN S DFN=$P($G(^SDEC(409.85,DA,0)),U,1) S X=$P($G(^DPT(+DFN,.3)),U,1) S:X="""" X=0"
 S SDXR("VAL",2,"SUBSCRIPT")=2
 S SDXR("VAL",3)=1
 S SDXR("VAL",3,"SUBSCRIPT")=3
 S SDXR("VAL",3,"COLLATION")="F"
 D CREIXN^DDMOD(.SDXR,"S",.SDRES,"SDOUT")
 Q
AGSB  ;GSB IN 409.85
 N Y
 S Y=$$NOW^XLFDT,Y=$$FMTE^XLFDT(Y)
 W !!,"Building new GSB xref in 409.85..."
 W !,Y
 N SDXR,SDRES,SDOUT
 S SDXR("FILE")=409.85
 S SDXR("NAME")="GSB"
 S SDXR("TYPE")="R"
 S SDXR("USE")="LS"
 S SDXR("EXECUTION")="R"
 S SDXR("ACTIVITY")="IR"
 S SDXR("SHORT DESCR")="SORT BY REQ SERVICE/SPECIALTY, SVC CONNECTED PRIORITY, AND CREATE DATE"
 S SDXR("DESCR",1)="This xref is used to sort Appointment Request entries by the REQ "
 S SDXR("DESCR",2)="SERVICE/SPECIALTY field (#8.5), SERVICE CONNECTED PRIORITY field (#15), "
 S SDXR("DESCR",3)="and the CREATE DATE field (#1)."
 S SDXR("VAL",1)=8.5
 S SDXR("VAL",1,"SUBSCRIPT")=1
 S SDXR("VAL",1,"COLLATION")="F"
 S SDXR("VAL",2)=15
 S SDXR("VAL",2,"SUBSCRIPT")=2
 S SDXR("VAL",2,"COLLATION")="F"
 S SDXR("VAL",3)=1
 S SDXR("VAL",3,"SUBSCRIPT")=3
 S SDXR("VAL",3,"COLLATION")="F"
 D CREIXN^DDMOD(.SDXR,"S",.SDRES,"SDOUT")
 Q
AGC   ;GC IN 409.85
 N Y
 S Y=$$NOW^XLFDT,Y=$$FMTE^XLFDT(Y)
 W !!,"Building new GC xref in 409.85..."
 W !,Y
 N SDXR,SDRES,SDOUT
 S SDXR("FILE")=409.85
 S SDXR("NAME")="GC"
 S SDXR("TYPE")="R"
 S SDXR("USE")="LS"
 S SDXR("EXECUTION")="R"
 S SDXR("ACTIVITY")="IR"
 S SDXR("SHORT DESCR")="SORT BY CLINIC AND ORIGINATING DATE"
 S SDXR("DESCR",1)="This xref is used to sort Appointment Request entries by the REQ SPECIFIC "
 S SDXR("DESCR",2)="CLINIC field (#8) and the CREATE DATE field (#1)."
 S SDXR("VAL",1)=8
 S SDXR("VAL",1,"SUBSCRIPT")=1
 S SDXR("VAL",1,"COLLATION")="F"
 S SDXR("VAL",2)=1
 S SDXR("VAL",2,"SUBSCRIPT")=2
 S SDXR("VAL",2,"COLLATION")="F"
 D CREIXN^DDMOD(.SDXR,"S",.SDRES,"SDOUT")
 Q
AGCC  ;GCC IN 409.85
 N Y
 S Y=$$NOW^XLFDT,Y=$$FMTE^XLFDT(Y)
 W !!,"Building new GCC xref in 409.85..."
 W !,Y
 N SDXR,SDRES,SDOUT
 S SDXR("FILE")=409.85
 S SDXR("NAME")="GCC"
 S SDXR("TYPE")="R"
 S SDXR("USE")="LS"
 S SDXR("EXECUTION")="R"
 S SDXR("ACTIVITY")="IR"
 S SDXR("SHORT DESCR")="SORT BY CLINIC AND CID/PREFERRED DATE"
 S SDXR("DESCR",1)="This xref is used to sort Appointment Request entries by the REQ SPECIFIC "
 S SDXR("DESCR",2)="CLINIC field (#8) and the CID PREFERRED DATE OF APPT field (#22)."
 S SDXR("VAL",1)=8
 S SDXR("VAL",1,"SUBSCRIPT")=1
 S SDXR("VAL",1,"COLLATION")="F"
 S SDXR("VAL",2)=22
 S SDXR("VAL",2,"SUBSCRIPT")=2
 S SDXR("VAL",2,"COLLATION")="F"
 D CREIXN^DDMOD(.SDXR,"S",.SDRES,"SDOUT")
 Q
